<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DTA –í–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä</title>
    <script type="module" src="/src/main.js"></script>
</head>
<body>
    <header role="banner">
        <h1>DTA –í–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä</h1>
        <div class="file-upload__wrapper">
            <label for="csvInput" class="file-label" aria-label="–ó–∞–≥—Ä—É–∑–∏—Ç—å CSV —Ñ–∞–π–ª —Å –¥–∞–Ω–Ω—ã–º–∏ DTA">
                <span class="file-icon" aria-hidden="true">üìÅ</span>
                <span>–ó–∞–≥—Ä—É–∑–∏—Ç—å CSV</span>
            </label>
            <input type="file" id="csvInput" accept=".csv" onclick="this.value=null" 
                   aria-describedby="fileHelpText" />
        </div>
        <button id="helpBtn" class="help-btn" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–º–æ—â—å">?</button>
    </header>

    <!-- –û–Ω–±–æ—Ä–¥–∏–Ω–≥/—Å–ø—Ä–∞–≤–∫–∞ -->
    <div id="helpModal" class="modal-overlay is-hidden" role="dialog" aria-modal="true" aria-labelledby="helpModalTitle">
        <div class="modal-content" role="document">
            <div class="modal-header">
                <h2 id="helpModalTitle">–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è DTA –í–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–º</h2>
                <button class="modal-close" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
            </div>
            <div class="modal-body">
                <div class="help-section">
                    <h3>üìã –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö</h3>
                    <p>–ó–∞–≥—Ä—É–∑–∏—Ç–µ CSV —Ñ–∞–π–ª —Å 3 –∫–æ–ª–æ–Ω–∫–∞–º–∏:</p>
                    <ul>
                        <li><strong>Time</strong> - –≤—Ä–µ–º—è –∏–∑–º–µ—Ä–µ–Ω–∏—è</li>
                        <li><strong>Temperature</strong> - —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (¬∞C)</li>
                        <li><strong>DTA</strong> - —Å–∏–≥–Ω–∞–ª –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π —Ç–µ—Ä–º–æ–∞–Ω–∞–ª–∏–∑–∞</li>
                    </ul>
                </div>
                
                <div class="help-section">
                    <h3>üöÄ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞–º–∏</h3>
                    <ul>
                        <li><strong>–ó—É–º:</strong> –≤—ã–¥–µ–ª–µ–Ω–∏–µ–º –º—ã—à—å—é –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏</li>
                        <li><strong>–°–±—Ä–æ—Å:</strong> –∫–Ω–æ–ø–∫–∞ "–°–±—Ä–æ—Å–∏—Ç—å –∑—É–º"</li>
                    </ul>
                </div>
                
                <div class="help-section">
                    <h3>üéØ –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–∞—Å–∞—Ç–µ–ª—å–Ω—ã—Ö</h3>
                    <ul>
                        <li>–í—ã–±–µ—Ä–∏—Ç–µ "–õ–∏–Ω–∏—é 1" –∏–ª–∏ "–õ–∏–Ω–∏—é 2" –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è</li>
                        <li>–ö–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –≥—Ä–∞—Ñ–∏–∫—É –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–π –≤ –Ω—É–∂–Ω–æ–π —Ç–æ—á–∫–µ</li>
                        <li>–ö–∞—Å–∞—Ç–µ–ª—å–Ω–∞—è –ø–æ—Å—Ç—Ä–æ–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</li>
                        <li>–ö–∞–∂–¥–∞—è –ª–∏–Ω–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑</li>
                    </ul>
                </div>
                
                <div class="help-section">
                    <h3>‚ÑπÔ∏è DTA (Differential Thermal Analysis)</h3>
                    <p>–ú–µ—Ç–æ–¥ —Ç–µ—Ä–º–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞, —Å—Ä–∞–≤–Ω–∏–≤–∞—é—â–∏–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –æ–±—Ä–∞–∑—Ü–∞ —Å —ç—Ç–∞–ª–æ–Ω–æ–º. 
                    –ü–∏–∫ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ñ–∞–∑–æ–≤—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –∏–ª–∏ —Ö–∏–º–∏—á–µ—Å–∫—É—é —Ä–µ–∞–∫—Ü–∏—é.</p>
                </div>
            </div>
        </div>
    </div>

    <main>
        <!-- 2. –ò–Ω—Ñ–æ —Å—Ç—Ä–æ–∫–∞ (–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏ –û—à–∏–±–∫–∏) -->
        <div class="info-bar">
            <div id="coordinatesDisplay" role="status" aria-live="polite">–ì–æ—Ç–æ–≤ –∫ –∑–∞–≥—Ä—É–∑–∫–µ</div>
            <div id="errorMessage" role="alert" aria-live="assertive">
                <span id="errorText"></span>
            </div>
            <!-- –°–∫—Ä—ã—Ç—ã–π span –¥–ª—è JS –ª–æ–≥–∏–∫–∏, –µ—Å–ª–∏ –Ω—É–∂–µ–Ω -->
            <span id="currentTangent" class="is-hidden"></span>
            <!-- –î–æ–±–∞–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∫–∞—Å–∞—Ç–µ–ª—å–Ω—ã—Ö –¥–ª—è —Å–∫—Ä–∏–Ω—Ä–∏–¥–µ—Ä–æ–≤ -->
            <div id="tangentStatusAria" class="sr-only" role="status" aria-live="polite"></div>
            <!-- –î–æ–±–∞–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—â—É—Ç—Å—è –≤ JavaScript -->
            <div id="tangentStatus" class="tangent-status"></div>
            <button id="showHelpBtn" class="help-btn" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–º–æ—â—å" style="display: none;">?</button>
        </div>

        <!-- 3. –û—Å–Ω–æ–≤–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫ -->
        <figure class="card chart-card main-chart">
            <div class="card__header chart-header">
                <div class="chart-title">–¢–µ—Ä–º–æ–≥—Ä–∞–º–º–∞ –îTA</div>
            </div>
            <div class="card__body chart-container" role="img" aria-label="–û—Å–Ω–æ–≤–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫ DTA —Ç–µ—Ä–º–æ–≥—Ä–∞–º–º—ã">
                <!-- –ü—Ä–µ–≤—Ä–∞—â–∞–µ–º –≤ label –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å input -->
                <label for="csvInput" id="placeholderText" class="placeholder placeholder--clickable" tabindex="0">
                    <div class="placeholder__content">
                        <span class="placeholder__icon" aria-hidden="true">üìÅ</span>
                        <h3 class="placeholder__title">–ó–∞–≥—Ä—É–∑–∏—Ç–µ CSV —Ñ–∞–π–ª</h3>
                        <p class="placeholder__text">–§–æ—Ä–º–∞—Ç: –≤—Ä–µ–º—è, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, DTA —Å–∏–≥–Ω–∞–ª</p>
                        <span class="placeholder__hint">–ö–ª–∏–∫–Ω–∏—Ç–µ –∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª —Å—é–¥–∞</span>
                    </div>
                </label>
                <canvas id="myChart" style="cursor: default;" 
                        aria-label="–ì—Ä–∞—Ñ–∏–∫ —Ç–µ—Ä–º–æ–≥—Ä–∞–º–º—ã DTA"></canvas>
            </div>
            <figcaption class="sr-only">–ì—Ä–∞—Ñ–∏–∫ –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Ä–º–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞</figcaption>
        </figure>

        <!-- 4. –ì—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–π -->
        <figure class="card chart-card sub-chart">
            <div class="card__header chart-header">
                <div class="chart-title">–ü—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è (dDTA/dt)</div>
                <div class="hint">üëÜ –ö–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –≥—Ä–∞—Ñ–∏–∫—É –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–π –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∫–∞—Å–∞—Ç–µ–ª—å–Ω–æ–π</div>
                <div class="tangent-controls" role="group" aria-label="–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Å–∞—Ç–µ–ª—å–Ω—ã–º–∏">
                    <button id="tangent1Btn" class="btn tangent-btn active" data-tangent="0" 
                            aria-label="–í—ã–±—Ä–∞—Ç—å –ø–µ—Ä–≤—É—é –∫–∞—Å–∞—Ç–µ–ª—å–Ω—É—é (—Å–∏–Ω—è—è)" 
                            aria-pressed="true"
                            title="–ö–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –≥—Ä–∞—Ñ–∏–∫—É –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–π –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∫–∞—Å–∞—Ç–µ–ª—å–Ω–æ–π">
                        –ö–∞—Å–∞—Ç–µ–ª—å–Ω–∞—è 1
                    </button>
                    <button id="tangent2Btn" class="btn tangent-btn" data-tangent="1" 
                            aria-label="–í—ã–±—Ä–∞—Ç—å –≤—Ç–æ—Ä—É—é –∫–∞—Å–∞—Ç–µ–ª—å–Ω—É—é (–æ—Ä–∞–Ω–∂–µ–≤–∞—è)" 
                            aria-pressed="false"
                            title="–ö–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –≥—Ä–∞—Ñ–∏–∫—É –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–π –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∫–∞—Å–∞—Ç–µ–ª—å–Ω–æ–π">
                        –ö–∞—Å–∞—Ç–µ–ª—å–Ω–∞—è 2
                    </button>
                </div>
                <button id="resetZoomBtn" class="btn btn--primary" disabled aria-label="–°–±—Ä–æ—Å–∏—Ç—å –º–∞—Å—à—Ç–∞–± –≥—Ä–∞—Ñ–∏–∫–æ–≤">–°–±—Ä–æ—Å–∏—Ç—å –∑—É–º</button>
            </div>
            <div class="card__body chart-container derivative-container" role="img" aria-label="–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–π DTA">
                <div id="placeholderTextDerivative" class="placeholder">
                    <div class="placeholder__content">
                        <span class="placeholder__icon" aria-hidden="true">üìä</span>
                        <h3 class="placeholder__title">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</h3>
                        <p class="placeholder__text">–ó–∞–≥—Ä—É–∑–∏—Ç–µ CSV –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–π</p>
                    </div>
                </div>
                <canvas id="derivativeChart" style="cursor: crosshair;"></canvas>
            </div>
            <figcaption class="sr-only">–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–π DTA</figcaption>
        </figure>
    </main>
</body>
</html>
