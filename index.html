<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="–£—á–µ–±–Ω—ã–π —Ç—Ä–µ–Ω–∞–∂—ë—Ä –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö DTA">
    <meta name="theme-color" content="#2563eb">
    <title>DTA –¢—Ä–µ–Ω–∞–∂—ë—Ä</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìä</text></svg>">
    <script type="module" src="/src/main.js"></script>
</head>
<body>
    <a href="#main-content" class="skip-link">–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É</a>

    <header role="banner">
        <h1>DTA –¢—Ä–µ–Ω–∞–∂—ë—Ä</h1>
        
        <!-- –í—ã–±–æ—Ä –ø—Ä–∏–º–µ—Ä–∞ -->
        <div class="sample-select-wrapper">
            <label for="sampleSelect" class="sr-only">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö</label>
            <select id="sampleSelect" class="sample-select">
                <option value="">üìÇ –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä...</option>
                <option value="sample">–ü–ª–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–∑—Ü–∞ Al-Si</option>
            </select>
        </div>

        <!-- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ -->
        <div class="file-upload">
            <label for="csvInput" class="file-label">
                <span class="file-icon" aria-hidden="true">üìÅ</span>
                <span class="file-label-text">–°–≤–æ–π —Ñ–∞–π–ª</span>
            </label>
            <input 
                type="file" 
                id="csvInput" 
                accept=".csv"
                aria-describedby="fileFormatHint"
            >
            <span id="fileFormatHint" class="sr-only">
                –§–æ—Ä–º–∞—Ç: CSV —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏ Time, Temperature, DTA
            </span>
        </div>

        <div class="header-actions">
            <span id="fileName" class="file-name" aria-live="polite"></span>
            
            <!-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã -->
            <button 
                type="button"
                id="themeToggle" 
                class="theme-toggle"
                aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è"
                title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É"
            >
                <span class="theme-toggle__icon--light" aria-hidden="true">üåô</span>
                <span class="theme-toggle__icon--dark" aria-hidden="true">‚òÄÔ∏è</span>
            </button>
            
            <!-- –ö–Ω–æ–ø–∫–∞ –¥–µ–º–æ -->
            <button 
                type="button"
                id="demoBtn" 
                class="btn btn--secondary"
                disabled
                aria-label="–ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é"
            >
                <span aria-hidden="true">‚ñ∂Ô∏è</span>
                <span class="btn-text">–î–µ–º–æ</span>
            </button>
            
            <button 
                type="button"
                id="helpBtn" 
                class="btn btn--icon btn--icon-round" 
                aria-label="–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É"
                aria-haspopup="dialog"
            >
                <span aria-hidden="true">?</span>
            </button>
        </div>
    </header>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–ø—Ä–∞–≤–∫–∏ -->
    <dialog id="helpModal" class="modal" aria-labelledby="helpModalTitle">
        <div class="modal__content">
            <header class="modal__header">
                <h2 id="helpModalTitle">–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ç—Ä–µ–Ω–∞–∂—ë—Ä–æ–º</h2>
                <button 
                    type="button"
                    class="modal__close" 
                    aria-label="–ó–∞–∫—Ä—ã—Ç—å —Å–ø—Ä–∞–≤–∫—É"
                    data-close-modal
                >
                    <span aria-hidden="true">√ó</span>
                </button>
            </header>
            
            <div class="modal__body">
                <section class="help-section">
                    <h3>
                        <span aria-hidden="true">üéØ</span>
                        –¶–µ–ª—å —Ä–∞–±–æ—Ç—ã
                    </h3>
                    <p>
                        –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É —Ñ–∞–∑–æ–≤–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ –º–µ—Ç–æ–¥–æ–º –∫–∞—Å–∞—Ç–µ–ª—å–Ω—ã—Ö.
                        –¢–æ—á–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –¥–≤—É—Ö –∫–∞—Å–∞—Ç–µ–ª—å–Ω—ã—Ö –¥–∞—ë—Ç –∏—Å–∫–æ–º—É—é —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É.
                    </p>
                </section>

                <section class="help-section">
                    <h3>
                        <span aria-hidden="true">üìã</span>
                        –ü–æ—Ä—è–¥–æ–∫ —Ä–∞–±–æ—Ç—ã
                    </h3>
                    <ol>
                        <li>–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ</li>
                        <li>–ò–∑—É—á–∏—Ç–µ –≥—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–π (dDTA/dt)</li>
                        <li>–ù–∞–π–¥–∏—Ç–µ –Ω–∞—á–∞–ª–æ –ø–∏–∫–∞ ‚Äî —Ä–µ–∑–∫–∏–π –ø–æ–¥—ä—ë–º –∫—Ä–∏–≤–æ–π</li>
                        <li>–ö–ª–∏–∫–Ω–∏—Ç–µ –≤ —Ç–æ—á–∫–µ –ø–µ—Ä–µ–≥–∏–±–∞ –¥–ª—è –ø–µ—Ä–≤–æ–π –∫–∞—Å–∞—Ç–µ–ª—å–Ω–æ–π</li>
                        <li>–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ ¬´–ö–∞—Å–∞—Ç–µ–ª—å–Ω–∞—è 2¬ª</li>
                        <li>–ù–∞–π–¥–∏—Ç–µ –æ–±–ª–∞—Å—Ç—å –ø–æ—Å–ª–µ –ø–∏–∫–∞ –∏ –ø–æ—Å—Ç—Ä–æ–π—Ç–µ –≤—Ç–æ—Ä—É—é –∫–∞—Å–∞—Ç–µ–ª—å–Ω—É—é</li>
                        <li>–ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –≤ –ø–∞–Ω–µ–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</li>
                    </ol>
                </section>
                
                <section class="help-section">
                    <h3>
                        <span aria-hidden="true">üí°</span>
                        –ü–æ–¥—Å–∫–∞–∑–∫–∏
                    </h3>
                    <p>
                        –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É <strong>¬´–ü–æ–¥—Å–∫–∞–∑–∫–∞¬ª</strong> –µ—Å–ª–∏ –∑–∞—Ç—Ä—É–¥–Ω—è–µ—Ç–µ—Å—å.
                        –ö–Ω–æ–ø–∫–∞ <strong>¬´–î–µ–º–æ¬ª</strong> –ø–æ–∫–∞–∂–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
                    </p>
                </section>

                <section class="help-section">
                    <h3>
                        <span aria-hidden="true">üîç</span>
                        –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–º
                    </h3>
                    <ul>
                        <li><strong>–ó—É–º:</strong> –≤—ã–¥–µ–ª–∏—Ç–µ –æ–±–ª–∞—Å—Ç—å –º—ã—à—å—é</li>
                        <li><strong>–°–±—Ä–æ—Å:</strong> –∫–Ω–æ–ø–∫–∞ ¬´–°–±—Ä–æ—Å–∏—Ç—å –∑—É–º¬ª</li>
                    </ul>
                </section>
            </div>

            <footer class="modal__footer">
                <button type="button" class="btn btn--primary" data-close-modal>
                    –ü–æ–Ω—è—Ç–Ω–æ
                </button>
            </footer>
        </div>
    </dialog>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
    <main id="main-content">
        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
        <div class="info-bar" role="region" aria-label="–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å">
            <output id="coordinatesDisplay" class="coordinates" aria-live="polite">
                –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ
            </output>
            
            <!-- –ü–∞–Ω–µ–ª—å –ø–æ–¥—Å–∫–∞–∑–æ–∫ -->
            <div id="hintPanel" class="hint-panel" hidden>
                <span id="hintText" class="hint-panel__text"></span>
                <button 
                    type="button" 
                    id="nextHintBtn" 
                    class="btn btn--small"
                    aria-label="–°–ª–µ–¥—ÉÔøΩÔøΩ—â–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞"
                >
                    –ü–æ–¥—Å–∫–∞–∑–∫–∞ üí°
                </button>
            </div>
            
            <div id="errorMessage" class="error-message" role="alert" aria-live="assertive" hidden>
                <span class="error-message__icon" aria-hidden="true">‚ö†Ô∏è</span>
                <span id="errorText" class="error-message__text"></span>
                <button 
                    type="button"
                    class="error-message__dismiss" 
                    aria-label="–°–∫—Ä—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ"
                    data-dismiss-error
                >
                    <span aria-hidden="true">√ó</span>
                </button>
            </div>
        </div>

        <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
        <div id="loadingIndicator" class="loading-overlay" hidden aria-live="polite">
            <div class="loading-spinner" role="status">
                <svg class="spinner-icon" viewBox="0 0 50 50" aria-hidden="true">
                    <circle cx="25" cy="25" r="20" fill="none" stroke="currentColor" stroke-width="4"></circle>
                </svg>
                <span class="loading-text">–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</span>
            </div>
        </div>

        <!-- –û–≤–µ—Ä–ª–µ–π –¥–µ–º–æ-—Ä–µ–∂–∏–º–∞ -->
        <div id="demoOverlay" class="demo-overlay" hidden>
            <div class="demo-overlay__content">
                <div class="demo-overlay__step">
                    <span id="demoStepNumber" class="demo-step-number">1</span>
                    <span id="demoStepText" class="demo-step-text"></span>
                </div>
                <button type="button" id="stopDemoBtn" class="btn btn--secondary">
                    –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–µ–º–æ
                </button>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫ DTA -->
        <figure class="chart-card chart-card--main">
            <figcaption class="chart-card__header">
                <h2 class="chart-card__title">–¢–µ—Ä–º–æ–≥—Ä–∞–º–º–∞ DTA</h2>
                
                <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ç–æ—á–∫–∏ –∫–ª–∏–∫–∞ -->
                <div id="clickPointInfo" class="click-point-info" hidden>
                    <span class="click-point-info__label">–¢–æ—á–∫–∞ –∫–∞—Å–∞—Ç–µ–ª—å–Ω–æ–π:</span>
                    <output id="clickPointValue" class="click-point-info__value"></output>
                </div>
            </figcaption>
            
            <div class="chart-card__body">
                <div id="mainChartPlaceholder" class="placeholder placeholder--interactive">
                    <label class="placeholder__content">
                        <span class="placeholder__icon" aria-hidden="true">üìä</span>
                        <span class="placeholder__title">–ù–∞—á–Ω–∏—Ç–µ —Ä–∞–±–æ—Ç—É</span>
                        <span class="placeholder__subtitle">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä –∏–∑ —Å–ø–∏—Å–∫–∞ –≤—ã—à–µ</span>
                        <span class="placeholder__hint">–∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–≤–æ–π CSV —Ñ–∞–π–ª</span>
                    </label>
                    <input type="file" id="mainChartFileInput" accept=".csv" style="display: none;">
                </div>
                <canvas 
                    id="mainChart" 
                    class="chart-canvas"
                    role="img" 
                    aria-label="–ì—Ä–∞—Ñ–∏–∫ —Ç–µ—Ä–º–æ–≥—Ä–∞–º–º—ã DTA"
                ></canvas>
            </div>
        </figure>

        <!-- –ì—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–π -->
        <figure class="chart-card chart-card--derivative">
            <figcaption class="chart-card__header">
                <h2 class="chart-card__title">–ü—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è (dDTA/dt)</h2>
                
                <p id="tangentHint" class="chart-card__hint" hidden>
                    üëÜ –ö–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –≥—Ä–∞—Ñ–∏–∫—É –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∫–∞—Å–∞—Ç–µ–ª—å–Ω–æ–π
                </p>
                
                <div class="chart-card__controls">
                    <fieldset class="tangent-controls" role="radiogroup" aria-label="–í—ã–±–æ—Ä –∫–∞—Å–∞—Ç–µ–ª—å–Ω–æ–π">
                        <legend class="sr-only">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Å–∞—Ç–µ–ª—å–Ω—É—é –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è</legend>
                        
                        <button 
                            type="button"
                            id="tangent1Btn" 
                            class="btn tangent-btn tangent-btn--1 is-active"
                            role="radio"
                            aria-checked="true"
                            data-tangent-index="0"
                            disabled
                        >
                            <span class="tangent-btn__indicator" aria-hidden="true"></span>
                            <span class="tangent-btn__label">–ö–∞—Å–∞—Ç–µ–ª—å–Ω–∞—è 1</span>
                            <span class="tangent-btn__status sr-only">–Ω–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞</span>
                        </button>
                        
                        <button 
                            type="button"
                            id="tangent2Btn" 
                            class="btn tangent-btn tangent-btn--2"
                            role="radio"
                            aria-checked="false"
                            data-tangent-index="1"
                            disabled
                        >
                            <span class="tangent-btn__indicator" aria-hidden="true"></span>
                            <span class="tangent-btn__label">–ö–∞—Å–∞—Ç–µ–ª—å–Ω–∞—è 2</span>
                            <span class="tangent-btn__status sr-only">–Ω–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞</span>
                        </button>
                    </fieldset>
                    
                    <button 
                        type="button"
                        id="clearTangentsBtn" 
                        class="btn btn--ghost"
                        disabled
                        aria-label="–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∫–∞—Å–∞—Ç–µ–ª—å–Ω—ã–µ"
                    >
                        <span aria-hidden="true">üóëÔ∏è</span>
                        –û—á–∏—Å—Ç–∏—Ç—å
                    </button>
                    
                    <button 
                        type="button"
                        id="resetZoomBtn" 
                        class="btn"
                        disabled
                        aria-label="–°–±—Ä–æ—Å–∏—Ç—å –º–∞—Å—à—Ç–∞–±"
                    >
                        <span aria-hidden="true">‚Ü∫</span>
                        –°–±—Ä–æ—Å–∏—Ç—å –∑—É–º
                    </button>
                </div>
            </figcaption>
            
            <div class="chart-card__body">
                <div id="derivativePlaceholder" class="placeholder">
                    <div class="placeholder__content">
                        <span class="placeholder__icon" aria-hidden="true">üìà</span>
                        <span class="placeholder__title">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</span>
                        <span class="placeholder__subtitle">–ì—Ä–∞—Ñ–∏–∫ –ø–æ—è–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏</span>
                    </div>
                </div>
                
                <!-- –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –æ–±–ª–∞—Å—Ç–∏ (–¥–ª—è –¥–µ–º–æ) -->
                <div id="highlightOverlay" class="highlight-overlay" hidden></div>
                
                <canvas 
                    id="derivativeChart" 
                    class="chart-canvas chart-canvas--interactive"
                    role="img"
                    aria-label="–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–π DTA"
                ></canvas>
            </div>
        </figure>
    </main>

    <!-- –°—Ç–∞—Ç—É—Å –¥–ª—è —Å–∫—Ä–∏–Ω—Ä–∏–¥–µ—Ä–æ–≤ -->
    <div id="a11yStatus" class="sr-only" role="status" aria-live="polite" aria-atomic="true"></div>
</body>
</html>
